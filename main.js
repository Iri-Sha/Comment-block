(()=>{"use strict";var e=[{name:"Маша",text:"Привет!",date:new Date},{name:"Петя",text:"Как дела?",date:new Date},{name:"Вова",text:"У меня кошка сбежала",date:new Date},{name:"Антон",text:"Идём пиво пить",date:new Date}],t=document.querySelector(".comment-template").content,r=document.querySelector(".elements__comments"),n=document.querySelector(".form"),o=n.querySelector(".form__input_user_name"),a=n.querySelector(".form__input_comment"),c=n.querySelector(".form__input_date"),s=document.querySelector(".form_comment"),l=document.querySelectorAll(".form__input"),u=document.querySelectorAll(".form__error"),i=document.querySelector(".button_new-comment"),m=document.querySelector("#inputComment"),d={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".button_new-comment",inactiveButtonClass:"button-disabled",inputErrorClass:"input_type_error",errorClass:"form__error_visible"};function v(e){e.target.classList.toggle("comment__like-button_active")}function f(e){e.target.closest(".comment").remove()}function C(e){var n=function(e){var r=t.cloneNode(!0),n=r.querySelector(".comment-name"),o=r.querySelector(".comment-text"),a=r.querySelector(".comment-date"),c=r.querySelector(".comment__like-button"),s=r.querySelector(".comment__delete-button");n.textContent=e.name,o.textContent=e.text;var l=new Date(e.date);return a.textContent=function(e){console.log(e);var t=e.getDate(),r=e.getMonth()+1,n=e.getFullYear(),o=new Date,a=o.getDate(),c=o.getMonth(),s=o.getFullYear(),l=o.getDate()-1,u=o.getHours(),i=o.getMinutes();return n=n.toString().slice(-2),r=r<10?"0"+r:r,u=u<10?"0"+u:u,i=i<10?"0"+i:i,(t=t<10?"0"+t:t)===a&&r===c&n===s?'"сегодня, " '.concat(u,":").concat(i):t===l&&r===c&n===s?'"вчера, " '.concat(u,":").concat(i):"".concat(t,".").concat(r,".").concat(n," ").concat(u,":").concat(i)}(l),console.log(e),c.addEventListener("click",v),s.addEventListener("click",f),r}(e);r.append(n)}function _(e){var t;e.preventDefault(),C({name:o.value,text:a.value,date:c.value}),s.reset(),t=d.inputErrorClass,d.errorClass,l.forEach((function(e){e.classList.remove(t)})),u.forEach((function(e){e.classList.remove(t),e.textContent=""})),c.valueAsDate=new Date,function(e,t){e.classList.add(t),e.disabled=!0}(i,d.inactiveButtonClass)}e.forEach(C),c.valueAsDate=new Date,s.addEventListener("submit",_),m.addEventListener("keydown",(function(e){console.log(),13===e.keyCode&&e.preventDefault(),13===e.keyCode&&!1===i.disabled&&_(e)}));var S,p,y,E,q,b,g,D=function(e,t,r){var n=r.inactiveButtonClass;!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(n),t.disabled=!1):(t.classList.add(n),t.disabled=!0)};p=(S=d).formSelector,y=S.inputSelector,E=S.submitButtonSelector,q=S.inactiveButtonClass,b=S.inputErrorClass,g=S.errorClass,Array.from(document.querySelectorAll(p)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var r=t.inputSelector,n=t.submitButtonSelector,o=t.inactiveButtonClass,a=t.inputErrorClass,c=t.errorClass,s=Array.from(e.querySelectorAll(r)),l=e.querySelector(n);D(s,l,{inactiveButtonClass:o}),s.forEach((function(t){t.addEventListener("input",(function(){!function(e,t,r){var n=r.inputErrorClass,o=r.errorClass;t.validity.valid?function(e,t,r){var n=r.inputErrorClass,o=r.errorClass,a=e.querySelector("#".concat(t.id,"-error"));t.classList.remove(n),a.classList.remove(o),a.textContent=""}(e,t,{inputErrorClass:n,errorClass:o}):function(e,t,r,n){var o=n.inputErrorClass,a=n.errorClass,c=e.querySelector("#".concat(t.id,"-error"));t.classList.add(o),c.textContent=r,c.classList.add(a)}(e,t,t.validationMessage,{inputErrorClass:n,errorClass:o})}(e,t,{inputErrorClass:a,errorClass:c}),D(s,l,{inactiveButtonClass:o})}))}))}(e,{inputSelector:y,submitButtonSelector:E,inactiveButtonClass:q,inputErrorClass:b,errorClass:g})}))})();